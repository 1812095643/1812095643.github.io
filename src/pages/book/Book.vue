<template>
  <div class="book">
    <div class="book-list">
      <div class="book-list-category">
        <div class="magical item">
          <a href="https://book.douban.com/subject/4886100/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/webform.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">点石成金的艺术</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/26642302/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/aboutface.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">About Face</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/27090342/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/thoughtsondesign.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">关于设计的思考</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/5394309/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/jianyuezhishang.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">简约至上</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/26423502/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/thestoryofart.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">艺术的故事</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/20471302/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/aroundyoudesignforyou.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">在你身边，为你设计</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/25915629/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/pojianchengdie.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">破茧成蝶</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/33454250/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/jueshengbduan.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">决胜 B 端</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/26647363/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/thedesignoffuturethings.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">设计心理学</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/26851515/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/thesmallbig.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">细节</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/1395495/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/hackerandpainters.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">黑客与画家</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/36953796/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/htmlbujiandan.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">HTML 并不简单</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
      </div>
      <div class="category-divider"></div>
      <div class="book-list-category">
        <div class="magical item">
          <a href="https://book.douban.com/subject/3674537/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/mingchao.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">明朝那些事儿</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/6126929/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/fengkuangkexue.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">疯狂科学</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/26672693/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/emansomheterove.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">一个叫欧维的男人决定去死</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
        <div class="magical item">
          <a href="https://book.douban.com/subject/34672132/" target="_blank">
            <div class="book-item" data-cover-url="/assets/book/abouttree.png">
              <div class="b-wrapper b-page b-back"></div>
              <div class="b-wrapper b-page b-four"></div>
              <div class="b-wrapper b-page b-three"></div>
              <div class="b-wrapper b-page b-two"></div>
              <div class="b-wrapper b-page b-one"><span class="b-one-title">树的秘密语言</span></div>
              <div class="b-wrapper b-front"></div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from 'vue'
import { usePageAnimations } from '../../composables/usePageAnimations'

// 使用页面动画
usePageAnimations()

// lazy set background image for .b-front
onMounted(() => {
  const items = document.querySelectorAll('.book-item')
  items.forEach((el) => {
    const n = el.getAttribute('data-cover-url')
    const front = el.querySelector<HTMLElement>('.b-front')
    if (n && front) {
      const img = new Image()
      img.src = n
      img.onload = () => {
        front.style.backgroundImage = `url('${n}')`
      }
    }
  })
})
</script>
